<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Court of Shadows</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<!-- Ã‰cran d'authentification -->
<div id="auth-screen" class="screen active">
    <div class="container">
        <div class="logo-container">
            <img src="images/logo.png" alt="Court of Shadows">
        </div>
        <h1 class="title">Court of Shadows</h1>
        <p class="subtitle">Un jeu de dÃ©duction sociale et d'intrigues</p>

        <div class="form-card">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Connexion</button>
                <button class="auth-tab" data-tab="register">Inscription</button>
            </div>

            <div id="login-form" class="auth-form active">
                <input type="text" id="login-username" placeholder="Nom d'utilisateur" maxlength="20">
                <input type="password" id="login-password" placeholder="Mot de passe" maxlength="50">
                <button id="login-btn" class="btn btn-primary">Se connecter</button>
            </div>

            <div id="register-form" class="auth-form">
                <input type="text" id="register-username" placeholder="Nom d'utilisateur" maxlength="20">
                <input type="password" id="register-password" placeholder="Mot de passe" maxlength="50">
                <input type="password" id="register-password-confirm" placeholder="Confirmer le mot de passe" maxlength="50">
                <button id="register-btn" class="btn btn-primary">S'inscrire</button>
            </div>

            <div id="auth-error" class="auth-error"></div>
        </div>
    </div>
</div>

<!-- Ã‰cran de lobby -->
<div id="lobby-screen" class="screen">
    <div class="container">
        <div class="logo-container">
            <img src="images/logo.png" alt="Court of Shadows">
        </div>
        <h1 class="title">Court of Shadows</h1>

        <div class="user-info">
            <span>Bienvenue, </span>
            <strong id="logged-username">-</strong>
            <button id="logout-btn" class="btn-icon" title="DÃ©connexion">Quitter</button>
        </div>

        <!-- Grille du lobby -->
        <div class="lobby-grid">
            <!-- Colonne gauche: Actions -->
            <div class="lobby-column lobby-actions">
                <!-- Section: CrÃ©er une partie -->
                <div class="form-card">
                    <h2>ğŸ® CrÃ©er une Partie</h2>

                    <div class="create-game-options">
                        <div class="game-type-selector">
                            <button class="game-type-btn active" data-type="public">
                                ğŸŒ Publique
                            </button>
                            <button class="game-type-btn" data-type="private">
                                ğŸ”’ PrivÃ©e
                            </button>
                        </div>

                        <div id="private-password-field" class="private-password-field">
                            <input type="password" id="game-password" placeholder="Mot de passe de la partie" maxlength="20">
                        </div>

                        <button id="create-game-btn" class="btn btn-primary btn-full">
                            CrÃ©er la Partie
                        </button>
                    </div>
                </div>

                <!-- Section: Rejoindre avec code -->
                <div class="form-card">
                    <h2>ğŸ”‘ Rejoindre avec Code</h2>

                    <div class="join-game-form">
                        <div class="input-group">
                            <label for="room-code" class="input-label">Code de la partie</label>
                            <input type="text" id="room-code" placeholder="Ex: ABC123" maxlength="10" class="input-with-icon">
                        </div>

                        <div class="input-group">
                            <label for="join-password" class="input-label">Mot de passe (optionnel)</label>
                            <input type="password" id="join-password" placeholder="Si partie privÃ©e..." maxlength="20">
                        </div>

                        <button id="join-game-btn" class="btn btn-primary btn-full">
                            ğŸšª Rejoindre la Partie
                        </button>
                    </div>
                </div>

                <!-- Bouton rÃ¨gles (visible sur mobile uniquement dans cette colonne) -->
                <div class="form-card lobby-rules-mobile">
                    <button id="show-rules-btn-mobile" class="btn btn-secondary btn-full">
                        ğŸ“œ Consulter les RÃ¨gles
                    </button>
                </div>
            </div>

            <!-- Colonne droite: Listes de parties -->
            <div class="lobby-column lobby-games">
                <!-- Section: Parties publiques -->
                <div class="form-card">
                    <div class="card-header">
                        <h2>ğŸŒ Parties Publiques</h2>
                        <button id="refresh-public-games" class="btn-icon-small" title="Actualiser">ğŸ”„</button>
                    </div>

                    <div id="public-games-list" class="games-list">
                        <p class="games-list-empty">Chargement...</p>
                    </div>
                </div>

                <!-- Section: Mes parties en cours -->
                <div class="form-card">
                    <div class="card-header">
                        <h2>ğŸ“‹ Mes Parties en Cours</h2>
                        <button id="refresh-my-games" class="btn-icon-small" title="Actualiser">ğŸ”„</button>
                    </div>

                    <div id="my-games-list" class="games-list">
                        <p class="games-list-empty">Aucune partie en cours</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bouton rÃ¨gles (pleine largeur sur PC) -->
        <div class="lobby-rules-desktop">
            <button id="show-rules-btn" class="btn btn-secondary btn-full">
                ğŸ“œ Consulter les RÃ¨gles du Jeu
            </button>
        </div>     
    </div>
</div>

<!-- Salle d'attente -->
<div id="waiting-room" class="screen">
    <div class="container">
        <h1 class="title"> Salle d'attente</h1>

        <div class="room-info">
            <p>Code de la partie : <strong id="display-room-code"></strong></p>
            <button id="copy-code-btn" class="btn-icon">ğŸ“‹</button>
        </div>

        <div class="players-list">
            <h2>Joueurs connectÃ©s (<span id="player-count">0</span>)</h2>
            <div id="players-container"></div>
        </div>

        <div id="game-settings" class="game-settings" style="display: none;">
            <h3>ParamÃ¨tres de la partie</h3>
            <div class="setting-item">
                <label class="toggle-label">
                    <input type="checkbox" id="setting-conspirators-know-usurper">
                    <span class="toggle-switch"></span>
                    <span class="setting-text">Les Conspirateurs connaissent l'Usurpateur</span>
                </label>
                <p class="setting-hint">Si activÃ©, les conspirateurs verront qui est l'usurpateur</p>
            </div>
            <div class="setting-item">
                <label class="toggle-label">
                    <input type="checkbox" id="setting-usurper-knows-allies">
                    <span class="toggle-switch"></span>
                    <span class="setting-text">L'Usurpateur connaÃ®t ses alliÃ©s</span>
                </label>
                <p class="setting-hint">Si activÃ©, l'usurpateur verra qui sont les conspirateurs</p>
            </div>
            <div class="setting-item" id="setting-limited-knowledge-container" style="display: none;">
                <label class="toggle-label">
                    <input type="checkbox" id="setting-limited-conspirators-knowledge">
                    <span class="toggle-switch"></span>
                    <span class="setting-text">Connaissance limitÃ©e des Conspirateurs</span>
                </label>
                <p class="setting-hint">9-10 joueurs uniquement : chaque conspirateur ne connaÃ®t qu'un seul alliÃ© (chaÃ®ne circulaire)</p>
            </div>
            <div class="setting-item">
                <label class="toggle-label">
                    <input type="checkbox" id="setting-previous-king-cannot-be-chancellor">
                    <span class="toggle-switch"></span>
                    <span class="setting-text">Le Roi prÃ©cÃ©dent ne peut Ãªtre Ã©lu Chancelier</span>
                </label>
                <p class="setting-hint">Si activÃ©, le roi du tour prÃ©cÃ©dent sera inÃ©ligible au poste de chancelier</p>
            </div>
        </div>

        <div class="waiting-actions">
            <button id="start-game-btn" class="btn btn-primary" style="display: none;">DÃ©marrer la partie</button>
            <button id="leave-game-btn" class="btn btn-danger">Quitter</button>
        </div>
    </div>
</div>

<!-- RÃ©vÃ©lation des rÃ´les -->
<div id="role-reveal" class="screen">
    <div class="container role-container">
        <div class="role-card">
            <div id="role-icon" class="role-icon"></div>
            <h1 id="role-title"></h1>
            <p id="role-description"></p>
            <div id="conspiracy-info" style="display: none;">
                <h3>Vos alliÃ©s conspirateurs :</h3>
                <ul id="conspirators-list"></ul>
            </div>
        </div>
    </div>
</div>

<!-- Jeu principal -->
<div id="game-screen" class="screen">
    <div class="game-container">
        <div class="game-header">
            <div class="score-board">
                <div class="deck-info">
                    <div class="deck-item draw-pile">
                        <img src="images/logo.png" alt="Pioche" class="deck-card-img">
                        <span class="deck-count" id="deck-count">17</span>
                        <span class="deck-label">Pioche</span>
                    </div>
                    <div class="deck-item discard-pile">
                        <div class="discard-placeholder"></div>
                        <span class="deck-count" id="discard-count">0</span>
                        <span class="deck-label">DÃ©fausse</span>
                    </div>
                </div>
                <div class="scores-container">
                    <div class="score-item loyalists">
                        <span class="label">Ã‰dits Royaux</span>
                        <span class="count" id="edits-count">0</span>/5
                    </div>
                    <div class="score-item conspirators">
                        <span class="label">Complots</span>
                        <span class="count" id="plots-count">0</span>/6
                    </div>
                </div>
            </div>

            <div class="phase-indicator">
                <span id="current-phase"></span>
            </div>

            <div class="header-right">
                <div class="player-info-display">
                    <span class="player-name-label" id="game-player-name">-</span>
                </div>
                <div class="player-role-display" id="player-role-display">
                    <span class="role-label">RÃ´le :</span>
                    <span class="role-value" id="your-role-value">-</span>
                </div>
                <div class="deadlock-counter">
                    <span>Impasse : </span>
                    <span id="deadlock-count">0</span>/3
                </div>
                <button id="game-rules-btn" class="btn-icon-settings" title="RÃ¨gles du jeu">ğŸ“–</button>
                <button id="host-settings-btn" class="btn-icon-settings" style="display: none;" title="ParamÃ¨tres de la partie">âš™ï¸</button>
            </div>
        </div>

        <div class="progression-boards-container">
            <div class="progression-board conspirators">
                <div class="board-header">ğŸ—¡ï¸ COMPLOTS</div>
                <div class="progress-markers" id="plots-markers">
                    <div class="progress-marker conspirators-marker" data-index="0">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label"></span>
                    </div>
                    <div class="progress-marker conspirators-marker" data-index="1">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label"></span>
                    </div>
                    <div class="progress-marker conspirators-marker" data-index="2">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label">ğŸ‘ï¸</span>
                    </div>
                    <div class="progress-marker conspirators-marker" data-index="3">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label">ğŸ”</span>
                    </div>
                    <div class="progress-marker conspirators-marker" data-index="4">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label">ğŸ’€</span>
                    </div>
                    <div class="progress-marker conspirators-marker" data-index="5">
                        <span class="marker-emoji">ğŸ—¡ï¸</span>
                        <span class="power-label">ğŸ†</span>
                    </div>
                </div>
            </div>

            <div class="progression-board loyalists">
                <div class="board-header">âšœï¸ Ã‰DITS ROYAUX</div>
                <div class="progress-markers edits" id="edits-markers">
                    <div class="progress-marker loyalists-marker" data-index="0">
                        <span class="marker-emoji">âšœï¸</span>
                    </div>
                    <div class="progress-marker loyalists-marker" data-index="1">
                        <span class="marker-emoji">âšœï¸</span>
                    </div>
                    <div class="progress-marker loyalists-marker" data-index="2">
                        <span class="marker-emoji">âšœï¸</span>
                    </div>
                    <div class="progress-marker loyalists-marker" data-index="3">
                        <span class="marker-emoji">âšœï¸</span>
                    </div>
                    <div class="progress-marker loyalists-marker" data-index="4">
                        <span class="marker-emoji">âšœï¸</span>
                        <span class="power-label">ğŸ†</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="game-main">
            <div class="game-players" id="players-section">
                <button class="section-toggle" id="toggle-players">
                    <span>ğŸ‘¥ Joueurs</span>
                    <span class="toggle-icon">â–¼</span>
                </button>
                <h3>Joueurs</h3>
                <div class="section-content">
                    <div id="game-players-list"></div>
                </div>
            </div>

            <div class="game-action">
                <div id="action-container"></div>
            </div>

            <div class="game-chat" id="chat-section">
                <button class="section-toggle" id="toggle-chat">
                    <span>ğŸ’¬ Discussion</span>
                    <span class="toggle-icon">â–¼</span>
                </button>
                <h3>ğŸ’¬ Discussion</h3>
                <div class="section-content">
                    <div id="chat-messages"></div>
                    <div id="share-cards-container"></div>
                    <div class="chat-input">
                        <input type="text" id="chat-input" placeholder="Votre message...">
                        <button id="send-chat-btn">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ã‰cran de fin -->
<div id="game-over-screen" class="screen">
    <div class="container">
        <div class="game-over-card">
            <h1 id="winner-title"></h1>
            <p id="winner-reason"></p>
            <div id="final-roles-container" class="final-roles-container"></div>
            <div class="game-over-actions">
                <button id="new-game-btn" class="btn btn-primary">Nouvelle partie</button>
                <button id="return-lobby-btn" class="btn btn-secondary">Retour au lobby</button>
            </div>
        </div>
    </div>
</div>

<!-- Ã‰cran des RÃ¨gles -->
<div id="rules-screen" class="screen">
    <div class="container">
        <button id="back-from-rules-btn" class="btn btn-secondary btn-back">â† Retour</button>
        <div class="logo-container">
            <img src="images/logo.png" alt="Court of Shadows">
        </div>
        <h1 class="title">RÃ¨gles du Jeu</h1>
        <p class="subtitle">Un jeu d'intrigue et de trahison pour 5 Ã  10 joueurs</p>
        
        <div class="form-card rules-content">
            <!-- Introduction -->
            <div class="rules-section">
                <h2>ğŸ“– Introduction</h2>
                <p>
                    Dans <strong>Court of Shadows</strong>, vous incarnez des membres de la cour royale dans une Ã©poque de complots et de trahisons.
                    Le royaume est divisÃ© entre les <span class="faction loyalists">Loyalistes</span> qui cherchent Ã  maintenir l'ordre,
                    et les <span class="faction conspirators">Conspirateurs</span> qui veulent renverser le pouvoir en place.
                </p>
                <p>
                    Parmi les Conspirateurs se cache l'<strong>Usurpateur</strong>, le chef secret qui convoite le trÃ´ne.
                    Les Loyalistes doivent le dÃ©masquer avant qu'il ne soit trop tard !
                </p>
            </div>

            <!-- Les RÃ´les -->
            <div class="rules-section">
                <h2>ğŸ‘¥ Les RÃ´les</h2>
                
                <h3>âšœï¸ Loyalistes</h3>
                <p>
                    Les Loyalistes forment la majoritÃ© de la cour. Ils ne connaissent l'identitÃ© de personne et doivent dÃ©couvrir qui sont les traÃ®tres
                    en observant les votes et les actions des autres joueurs.
                </p>

                <h3>ğŸ—¡ï¸ Conspirateurs</h3>
                <p>
                    Les Conspirateurs se connaissent entre eux. Ils doivent saboter les efforts des Loyalistes tout en restant discrets
                    pour ne pas Ãªtre dÃ©couverts.
                </p>

                <h3>ğŸ‘‘ğŸ’€ Usurpateur</h3>
                <p>
                    L'Usurpateur est le chef des Conspirateurs. Il ne connaÃ®t l'identitÃ© de personne (sauf si l'option est activÃ©e).
                    Son objectif ultime est de devenir Chancelier aprÃ¨s que 3 Complots aient Ã©tÃ© adoptÃ©s.
                </p>

                <p class="rules-highlight">
                    <strong>Option de jeu :</strong> "Les Conspirateurs connaissent l'Usurpateur" - Si activÃ©e, les Conspirateurs
                    peuvent voir qui est l'Usurpateur, ce qui facilite leur coordination.
                </p>

                <p class="rules-highlight">
                    <strong>Option de jeu :</strong> "L'Usurpateur connaÃ®t ses alliÃ©s" - Si activÃ©e, l'Usurpateur peut voir qui sont les Conspirateurs, ce qui lui permet de mieux coordonner ses actions.
                </p>

                <p class="rules-highlight">
                    <strong>Option de jeu :</strong> "Connaissance limitÃ©e entre Conspirateurs" (9-10 joueurs) - Si activÃ©e, chaque Conspirateur ne connaÃ®t qu'un seul autre Conspirateur dans une chaÃ®ne circulaire, rendant la coordination plus difficile.
                </p>

                <p class="rules-highlight">
                    <strong>Option de jeu :</strong> "Le Roi prÃ©cÃ©dent ne peut Ãªtre Ã©lu Chancelier" - Si activÃ©e, le Roi du tour prÃ©cÃ©dent est Ã©galement inÃ©ligible au poste de Chancelier, en plus du Chancelier prÃ©cÃ©dent.
                </p>
            </div>

            <!-- Distribution des RÃ´les -->
            <div class="rules-section">
                <h2>ğŸ“Š Distribution des RÃ´les</h2>
                <div class="table-scroll-container">
                    <table class="rules-table">
                        <thead>
                            <tr>
                                <th>ğŸ‘¥</th>
                                <th>âšœï¸ Loyalistes</th>
                                <th>ğŸ—¡ï¸ Conspirateurs</th>
                                <th>ğŸ‘‘ğŸ’€ Usurpateur</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>5</td><td>3</td><td>1</td><td>1</td></tr>
                            <tr><td>6</td><td>4</td><td>1</td><td>1</td></tr>
                            <tr><td>7</td><td>4</td><td>2</td><td>1</td></tr>
                            <tr><td>8</td><td>5</td><td>2</td><td>1</td></tr>
                            <tr><td>9</td><td>5</td><td>3</td><td>1</td></tr>
                            <tr><td>10</td><td>6</td><td>3</td><td>1</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Les DÃ©crets -->
            <div class="rules-section">
                <h2>Les DÃ©crets</h2>
                <p>Le jeu utilise un paquet de <strong>17 dÃ©crets</strong> :</p>
                <ul class="rules-list">
                    <li><span class="card-badge card-plot">ğŸ—¡ï¸ 11 Complots</span> - Favorisent les Conspirateurs</li>
                    <li><span class="card-badge card-edit">âšœï¸ 6 Ã‰dits Royaux</span> - Favorisent les Loyalistes</li>
                </ul>
            </div>

            <!-- Conditions de Victoire -->
            <div class="rules-section">
                <h2>Conditions de Victoire</h2>
                
                <h3>Victoire des Loyalistes âšœï¸</h3>
                <ul class="rules-list">
                    <li><strong>5 Ã‰dits Royaux adoptÃ©s</strong> - La stabilitÃ© est restaurÃ©e !</li>
                    <li><strong>L'Usurpateur est exÃ©cutÃ©</strong> - Le traÃ®tre a Ã©tÃ© dÃ©masquÃ© !</li>
                </ul>

                <h3>Victoire des Conspirateurs ğŸ—¡ï¸</h3>
                <ul class="rules-list">
                    <li><strong>6 Complots adoptÃ©s</strong> - Le chaos rÃ¨gne !</li>
                    <li><strong>L'Usurpateur devient Chancelier</strong> (aprÃ¨s 3 Complots) - L'Usurpateur prend le pouvoir !</li>
                </ul>
            </div>

            <!-- DÃ©roulement d'un Tour -->
            <div class="rules-section">
                <h2>DÃ©roulement d'un Tour</h2>
                
                <h3>1. ğŸ‘‘ Nomination du Chancelier</h3>
                <p>
                    Le <strong>Roi</strong> (prÃ©sident du tour) nomme un autre joueur pour devenir <strong>Chancelier</strong>.
                </p>
                <p class="rules-highlight">
                    <strong>Restriction :</strong> Le Chancelier du tour prÃ©cÃ©dent ne peut pas Ãªtre renommÃ© immÃ©diatement.
                    Si l'option "Le Roi prÃ©cÃ©dent ne peut Ãªtre Ã©lu Chancelier" est activÃ©e, le Roi du tour prÃ©cÃ©dent est Ã©galement inÃ©ligible.
                </p>

                <h3>2. ğŸ—³ï¸ Vote du Conseil</h3>
                <p>
                    Tous les joueurs vivants votent <strong>OUI</strong> ou <strong>NON</strong> pour approuver le gouvernement proposÃ©.
                </p>
                <ul class="rules-list">
                    <li><strong>MajoritÃ© de OUI :</strong> Le gouvernement est Ã©lu, on passe Ã  la session lÃ©gislative.</li>
                    <li><strong>MajoritÃ© de NON :</strong> Le gouvernement est rejetÃ©, le compteur d'impasse augmente.</li>
                </ul>
                <p class="rules-highlight">
                    <strong>Impasse :</strong> AprÃ¨s 3 rejets consÃ©cutifs, la premiÃ¨re carte de la pioche est automatiquement adoptÃ©e !
                </p>

                <h3>3. ğŸ“œ Session LÃ©gislative</h3>
                <ol class="rules-list-numbered">
                    <li>Le <strong>Roi</strong> pioche 3 dÃ©crets et en dÃ©fausse 1 secrÃ¨tement.</li>
                    <li>Il passe les 2 dÃ©crets restants au <strong>Chancelier</strong>.</li>
                    <li>Le <strong>Chancelier</strong> dÃ©fausse 1 dÃ©cret et adopte l'autre.</li>
                </ol>
                <p style="font-style: italic; color: #aaa; margin-top: 10px;">
                    Aucune communication n'est autorisÃ©e pendant la session. AprÃ¨s, les joueurs peuvent discuter
                    (et potentiellement mentir) sur les cartes qu'ils avaient.
                </p>

                <h3>4. âš¡ Pouvoir ExÃ©cutif (si applicable)</h3>
                <p>
                    Quand un <span class="card-badge card-plot">Complot</span> est adoptÃ©, le Roi peut obtenir un pouvoir spÃ©cial
                    selon le nombre de Complots adoptÃ©s et le nombre de joueurs.
                </p>
            </div>

            <!-- Pouvoirs ExÃ©cutifs -->
            <div class="rules-section">
                <h2>Pouvoirs ExÃ©cutifs</h2>
                
                <h3>Plateau 5-6 joueurs</h3>
                <table class="rules-table power-table">
                    <thead>
                        <tr>
                            <th>Complots</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Pouvoir</strong></td>
                            <td>-</td>
                            <td>-</td>
                            <td>ğŸ‘ï¸ Inspection</td>
                            <td>ğŸ’€ ExÃ©cution</td>
                            <td>ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Version mobile 5-6 joueurs -->
                <div class="power-cards-mobile">
                    <div class="power-card-mobile"><span class="power-number">1</span><span class="power-name">-</span></div>
                    <div class="power-card-mobile"><span class="power-number">2</span><span class="power-name">-</span></div>
                    <div class="power-card-mobile"><span class="power-number">3</span><span class="power-name">ğŸ‘ï¸ Inspection</span></div>
                    <div class="power-card-mobile"><span class="power-number">4</span><span class="power-name">ğŸ’€ ExÃ©cution</span></div>
                    <div class="power-card-mobile"><span class="power-number">5</span><span class="power-name">ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</span></div>
                </div>

                <h3>Plateau 7-8 joueurs</h3>
                <table class="rules-table power-table">
                    <thead>
                        <tr>
                            <th>Complots</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Pouvoir</strong></td>
                            <td>-</td>
                            <td>ğŸ” EnquÃªte</td>
                            <td>ğŸ‘‘ Succession</td>
                            <td>ğŸ’€ ExÃ©cution</td>
                            <td>ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Version mobile 7-8 joueurs -->
                <div class="power-cards-mobile">
                    <div class="power-card-mobile"><span class="power-number">1</span><span class="power-name">-</span></div>
                    <div class="power-card-mobile"><span class="power-number">2</span><span class="power-name">ğŸ” EnquÃªte</span></div>
                    <div class="power-card-mobile"><span class="power-number">3</span><span class="power-name">ğŸ‘‘ Succession</span></div>
                    <div class="power-card-mobile"><span class="power-number">4</span><span class="power-name">ğŸ’€ ExÃ©cution</span></div>
                    <div class="power-card-mobile"><span class="power-number">5</span><span class="power-name">ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</span></div>
                </div>

                <h3>Plateau 9-10 joueurs</h3>
                <table class="rules-table power-table">
                    <thead>
                        <tr>
                            <th>Complots</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Pouvoir</strong></td>
                            <td>ğŸ” EnquÃªte</td>
                            <td>ğŸ” EnquÃªte</td>
                            <td>ğŸ‘‘ Succession</td>
                            <td>ğŸ’€ ExÃ©cution</td>
                            <td>ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Version mobile 9-10 joueurs -->
                <div class="power-cards-mobile">
                    <div class="power-card-mobile"><span class="power-number">1</span><span class="power-name">ğŸ” EnquÃªte</span></div>
                    <div class="power-card-mobile"><span class="power-number">2</span><span class="power-name">ğŸ” EnquÃªte</span></div>
                    <div class="power-card-mobile"><span class="power-number">3</span><span class="power-name">ğŸ‘‘ Succession</span></div>
                    <div class="power-card-mobile"><span class="power-number">4</span><span class="power-name">ğŸ’€ ExÃ©cution</span></div>
                    <div class="power-card-mobile"><span class="power-number">5</span><span class="power-name">ğŸ’€ ExÃ©cution + ğŸš« VÃ©to</span></div>
                </div>

                <p style="margin-top: 15px; font-style: italic; color: #aaa;">
                    ğŸš« <strong>VÃ©to :</strong> Ã€ partir de 5 Complots, le Chancelier peut proposer un vÃ©to.
                </p>

                <h3>Description des Pouvoirs</h3>
                <ul class="rules-list">
                    <li><strong>ğŸ‘ï¸ Inspection de la Pioche :</strong> Le Roi regarde secrÃ¨tement les 3 prochaines cartes de la pioche.</li>
                    <li><strong>ğŸ” EnquÃªte :</strong> Le Roi choisit un joueur et dÃ©couvre secrÃ¨tement sa faction (Loyaliste ou Conspirateur).</li>
                    <li><strong>ğŸ‘‘ Succession SpÃ©ciale :</strong> Le Roi choisit qui sera le prochain Roi.</li>
                    <li><strong>ğŸ’€ ExÃ©cution :</strong> Le Roi Ã©limine un joueur de la partie. Si c'est l'Usurpateur, les Loyalistes gagnent immÃ©diatement !</li>
                </ul>
            </div>

            <!-- Le VÃ©to -->
            <div class="rules-section">
                <h2>ğŸš« Le VÃ©to</h2>
                <p>
                    Le <strong>VÃ©to</strong> est un pouvoir spÃ©cial qui se dÃ©bloque lorsque <strong>5 Complots</strong> ont Ã©tÃ© adoptÃ©s.
                    Il permet d'Ã©viter les situations de malchance en fin de partie.
                </p>

                <div class="rules-highlight">
                    <strong>Comment fonctionne le VÃ©to :</strong>
                    <ol class="rules-list-numbered" style="margin-top: 15px;">
                        <li>Lorsque le <strong>Chancelier</strong> reÃ§oit ses 2 cartes, il peut choisir de <strong>proposer un VÃ©to</strong> au lieu de dÃ©fausser une carte.</li>
                        <li>Le <strong>Roi</strong> doit alors dÃ©cider d'<strong>accepter</strong> ou de <strong>refuser</strong> le VÃ©to.</li>
                        <li><strong>Si le Roi accepte :</strong> Les 2 cartes sont dÃ©faussÃ©es, aucune loi n'est adoptÃ©e, et le compteur d'impasse augmente de 1.</li>
                        <li><strong>Si le Roi refuse :</strong> Le Chancelier doit obligatoirement choisir une des 2 cartes Ã  dÃ©fausser (comme d'habitude).</li>
                    </ol>
                </div>

                <p class="rules-warning">
                    <strong>âš ï¸ Attention :</strong> Le VÃ©to compte comme un tour sans loi adoptÃ©e. AprÃ¨s 3 tours consÃ©cutifs sans loi
                    (votes rejetÃ©s ou vÃ©tos acceptÃ©s), la premiÃ¨re carte de la pioche est automatiquement adoptÃ©e !
                </p>
            </div>

            <!-- Conseils StratÃ©giques -->
            <div class="rules-section">
                <h2>ğŸ’¡ Conseils StratÃ©giques</h2>
                
                <h3>Pour les Loyalistes</h3>
                <ul class="rules-list">
                    <li>Observez attentivement les votes et les accusations.</li>
                    <li>MÃ©fiez-vous des joueurs qui votent OUI pour des gouvernements suspects.</li>
                    <li>N'ayez pas peur d'utiliser l'ExÃ©cution si vous avez des soupÃ§ons fondÃ©s.</li>
                    <li>AprÃ¨s 3 Complots, faites trÃ¨s attention Ã  qui devient Chancelier !</li>
                </ul>

                <h3>Pour les Conspirateurs</h3>
                <ul class="rules-list">
                    <li>Ne soyez pas trop Ã©vidents dans vos sabotages.</li>
                    <li>Accusez parfois vos alliÃ©s pour paraÃ®tre crÃ©dibles.</li>
                    <li>Votez parfois avec les Loyalistes pour ne pas Ãªtre repÃ©rÃ©s.</li>
                    <li>ProtÃ©gez l'Usurpateur sans Ãªtre trop suspects.</li>
                </ul>

                <h3>Pour l'Usurpateur</h3>
                <ul class="rules-list">
                    <li>Jouez comme un Loyaliste au dÃ©but pour gagner la confiance.</li>
                    <li>Ã‰vitez de devenir Chancelier trop tÃ´t (avant 3 Complots).</li>
                    <li>Une fois 3 Complots adoptÃ©s, faites-vous Ã©lire Chancelier pour gagner !</li>
                </ul>
            </div>

            <!-- Footer -->
            <div class="rules-footer">
                <p>âš”ï¸ Bonne partie et que les intrigues commencent ! âš”ï¸</p>
                <p style="margin-top: 10px; color: #888; font-size: 0.9rem;">
                    ğŸ‘‘ Court of Shadows ğŸ—¡ï¸
                </p>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button id="close-rules-btn" class="btn btn-primary">Retour</button>
        </div>
    </div>
</div>

<!-- Popup de confirmation -->
<div id="confirm-popup" class="confirm-popup-overlay" style="display: none;">
    <div class="confirm-popup">
        <div class="confirm-popup-icon" id="confirm-popup-icon">âš ï¸</div>
        <h3 class="confirm-popup-title" id="confirm-popup-title">Confirmation</h3>
        <p class="confirm-popup-message" id="confirm-popup-message">ÃŠtes-vous sÃ»r ?</p>
        <div class="confirm-popup-buttons">
            <button id="confirm-popup-cancel" class="btn btn-secondary">Annuler</button>
            <button id="confirm-popup-confirm" class="btn btn-danger">Confirmer</button>
        </div>
    </div>
</div>

<!-- Popup paramÃ¨tres de la partie -->
<div id="game-settings-popup" class="settings-popup-overlay" style="display: none;">
    <div class="settings-popup">
        <div class="settings-popup-header">
            <h3>âš™ï¸ ParamÃ¨tres de la partie</h3>
            <button id="close-settings-popup" class="btn-close-settings">&times;</button>
        </div>
        <div class="settings-popup-content">
            <button id="settings-pause-btn" class="btn btn-secondary btn-full">
                <span class="btn-icon-left">â¸ï¸</span> Mettre en pause
            </button>
            <button id="settings-stop-btn" class="btn btn-danger btn-full">
                <span class="btn-icon-left">ğŸ›‘</span> ArrÃªter la partie
            </button>
        </div>
    </div>
</div>

<!-- Footer discret -->
<footer class="site-footer">
    <span class="footer-version">v1.0.1</span>
    <span class="footer-credit">CrÃ©Ã© par KiSsWave</span>
</footer>

<script src="js/boards.js"></script>
<script src="js/constants.js"></script>
<script src="js/client.js"></script>
</body>
</html>
